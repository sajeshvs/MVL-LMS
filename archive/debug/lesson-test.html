<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MVL-LMS - AC.L2-3.1.2 Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <style>
        .lesson-section {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
            overflow: hidden;
        }
        .section-header {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            color: white;
            padding: 1rem 1.5rem;
            font-weight: 600;
            font-size: 1.1rem;
        }
        .section-content {
            padding: 1.5rem;
        }
    </style>
</head>
<body class="bg-gray-50">
    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8" x-data="testLessonData()">
        
        <!-- Header -->
        <section class="bg-gradient-to-r from-blue-600 to-blue-800 rounded-xl p-8 text-white mb-8">
            <h1 class="text-4xl font-bold mb-4">AC.L2-3.1.2 Test Page</h1>
            <p>Testing dynamic content loading...</p>
        </section>

        <!-- Official Requirement Section -->
        <section class="lesson-section">
            <div class="section-header">
                üîë Official Requirement
            </div>
            <div class="section-content">
                <div class="bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r-lg">
                    <h3 class="font-bold text-blue-900 mb-2">CMMC v2 ‚Äì AC.L2-3.1.2</h3>
                    <p class="text-blue-800 text-lg italic">
                        "Limit system access to the types of transactions and functions that authorized users are permitted to execute."
                    </p>
                </div>
            </div>
        </section>

        <!-- Why This Matters Section -->
        <section class="lesson-section">
            <div class="section-header">
                üéØ Why This Matters
            </div>
            <div class="section-content">
                <div class="space-y-3">
                    <div class="flex items-start space-x-3">
                        <span class="text-red-500 text-xl">‚Ä¢</span>
                        <span>Stops "privilege creep" (users hoarding powers they don't need).</span>
                    </div>
                    <div class="flex items-start space-x-3">
                        <span class="text-red-500 text-xl">‚Ä¢</span>
                        <span>Reduces blast radius if an account gets pwned.</span>
                    </div>
                    <div class="flex items-start space-x-3">
                        <span class="text-red-500 text-xl">‚Ä¢</span>
                        <span>A core Least-Privilege / Zero-Trust pillar ‚Üí auditors laser-focus on it.</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- How MVL Does It Section -->
        <section class="lesson-section">
            <div class="section-header">
                üè¢ How MVL Does It
            </div>
            <div class="section-content">
                <div class="space-y-3">
                    <div class="flex items-start space-x-3">
                        <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold">1</span>
                        <span><strong>Role-Based Access Control (RBAC)</strong> in Entra ID & M365 groups ‚Äî users only see apps/data tied to their job role.</span>
                    </div>
                    <div class="flex items-start space-x-3">
                        <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold">2</span>
                        <span><strong>Privileged Identity Mgmt (PIM)</strong> ‚ü∂ time-boxed, just-in-time elevation for admins.</span>
                    </div>
                    <div class="flex items-start space-x-3">
                        <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold">3</span>
                        <span><strong>Zscaler App Segmentation</strong> ‚Äî maps roles to private apps; HR can't even ping engineering Git repos.</span>
                    </div>
                    <div class="flex items-start space-x-3">
                        <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold">4</span>
                        <span><strong>SharePoint Sensitivity Labels</strong> ‚Äî auto-restrict download/print on CUI libraries.</span>
                    </div>
                    <div class="flex items-start space-x-3">
                        <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold">5</span>
                        <span><strong>Intune App Protection Policies</strong> ‚Äî separate corporate vs. personal data on BYOD.</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Dynamic Test Section -->
        <section class="lesson-section">
            <div class="section-header">
                üîß Dynamic Content Test
            </div>
            <div class="section-content">
                <p><strong>Data Available:</strong> <span x-text="dataAvailable ? 'Yes' : 'No'"></span></p>
                <p><strong>Current Domain:</strong> <span x-text="domain"></span></p>
                <p><strong>Current Requirement:</strong> <span x-text="requirement"></span></p>
                <p><strong>Lesson Key:</strong> <span x-text="lessonKey"></span></p>
                <div class="mt-4">
                    <button @click="testDataLoad()" class="bg-blue-600 text-white px-4 py-2 rounded">Test Data Load</button>
                </div>
                <div x-show="testResult" class="mt-4 p-4 bg-gray-100 rounded">
                    <pre x-text="testResult"></pre>
                </div>
            </div>
        </section>
    </main>

    <script src="assets/js/curriculum-data.js"></script>
    <script>
        function testLessonData() {
            return {
                domain: 'AC',
                requirement: '3.1.2',
                lessonKey: 'AC.3.1.2',
                dataAvailable: false,
                testResult: '',

                init() {
                    const urlParams = new URLSearchParams(window.location.search);
                    this.domain = urlParams.get('domain') || 'AC';
                    this.requirement = urlParams.get('requirement') || '3.1.2';
                    this.lessonKey = `${this.domain}.${this.requirement}`;
                    
                    setTimeout(() => {
                        this.dataAvailable = !!window.LESSONS_DATA;
                        console.log('Data check:', this.dataAvailable);
                    }, 100);
                },

                testDataLoad() {
                    if (window.LESSONS_DATA) {
                        const keys = Object.keys(window.LESSONS_DATA);
                        const lessonData = window.LESSONS_DATA[this.lessonKey];
                        
                        this.testResult = `Data Status: Available
Total Lessons: ${keys.length}
Looking for: ${this.lessonKey}
Found: ${!!lessonData}

First 10 keys: ${keys.slice(0, 10).join(', ')}

Lesson Data: ${lessonData ? JSON.stringify(lessonData, null, 2) : 'NOT FOUND'}`;
                    } else {
                        this.testResult = 'LESSONS_DATA not available';
                    }
                }
            }
        }
    </script>
</body>
</html>
